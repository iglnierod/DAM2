DROP DATABASE IF EXISTS empleados;
CREATE DATABASE empleados;

USE empleados;

CREATE TABLE depto (
    numdep INT(10) PRIMARY KEY,
    nomdep VARCHAR(50) NOT NULL,
    localidad VARCHAR(50) NOT NULL,
    numjefe INT(10)
);

INSERT INTO depto VALUES (1,'CONTABILIDAD','SANTIAGO',7782);
INSERT INTO depto VALUES (2,'ADMINISTRACION','VIGO',7369);
INSERT INTO depto VALUES (3,'VENTAS','PONTEVEDRA',7499);
INSERT INTO depto VALUES (4,'OPERACIONES','VILAGARCIA',7934);

CREATE TABLE emp(
    numemp INT(10) PRIMARY KEY,
    nomemp VARCHAR(50) NOT NULL,
    puesto VARCHAR(50) NOT NULL,
    feccont DATE NOT NULL,
    sal DECIMAL(10,2) NOT NULL,
    comision DECIMAL(10,2),
    numdep INT(10),
    CONSTRAINT FK_NUMDEP FOREIGN KEY (numdep)
    REFERENCES depto(numdep)
);

INSERT INTO emp VALUES (7369,'SMITH','CONTABLE','1980-12-17',800.00,NULL,2);
INSERT INTO emp VALUES (7499,'ALLEN','COMERCIAL','1981-02-20',1600.00,300.00,3);
INSERT INTO emp VALUES (7521,'WARD','COMERCIAL','1981-02-22',1250.00,500.00,3);
INSERT INTO emp VALUES (7566,'JONES','MANAGER','1981-04-02',2975.00,NULL,2);
INSERT INTO emp VALUES (7654,'MARTIN','COMERCIAL','1981-09-28',1250.00,1400.00,3);
INSERT INTO emp VALUES (7698,'BLAKE','MANAGER','1981-05-01',2850.00,NULL,3);
INSERT INTO emp VALUES (7782,'CLARK','MANAGER','1981-06-09',2450.00,NULL,1);
INSERT INTO emp VALUES (7788,'SCOTT','ANALISTA','1982-12-09',3000.00,NULL,2);
INSERT INTO emp VALUES (7839,'KING','PRESIDENTE','1981-11-17',5000.00,NULL,1);
INSERT INTO emp VALUES (7844,'TURNER','COMERCIAL','1981-09-08',1500.00,0.00,3);
INSERT INTO emp VALUES (7876,'ADAMS','CONTABLE','1983-01-12',1100.00,NULL,2);
INSERT INTO emp VALUES (7900,'JAMES','CONTABLE','1981-12-03',950.00,NULL,3);
INSERT INTO emp VALUES (7902,'FORD','ANALISTA','1981-12-03',3000.00,NULL,2);
INSERT INTO emp VALUES (7934,'MILLER','CONTABLE','1982-01-23',1300.00,NULL,1);

ALTER TABLE depto
ADD CONSTRAINT FK_NUMJEFE FOREIGN KEY (numjefe)
REFERENCES emp(numemp);